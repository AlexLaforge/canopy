#!/usr/bin/env node

var Canopy = require('../lib/canopy'),
    fs     = require('fs');

try {
  var startTime  = new Date().getTime(),
      inputFile  = process.argv[2],
      outputFile = inputFile.replace(/\.peg$/, '.js'),

      grammar    = fs.readFileSync(inputFile).toString(),
      parser     = Canopy.compile(grammar),
      endTime    = new Date().getTime();

  fs.writeFileSync(outputFile, parser);

} catch (e) {
  console.error(e.message);
}

